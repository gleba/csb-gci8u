{"version":3,"sources":["heartdonation/css.js","heartdonation/svg.heart.js","heartdonation/widget.js","heartdonation/index.js"],"names":["css","styles","styleSheet","document","createElement","type","innerText","head","appendChild","heartPath","child","animAlpha","from","to","dur","animScale","animMove","f","x","aHeart","Ah","t","svgHeart","getUrl","name","end_date","start_date","moneyFormater","Intl","NumberFormat","style","currency","makeWidget","tag","props","getAttribute","targetValue","innerHTML","format","el","children","targetDiv","currentValueDiv","si","setInterval","Math","round","random","opacity","setTargetAlpha","color","fetch","then","r","json","resp","console","log","clearInterval","data","catch","e","donateButton","addEventListener","myInitCode","widgets","getElementsByClassName","length","element","event","window","readyState"],"mappings":"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","file":"heartdonation.57d37698.js","sourceRoot":"..","sourcesContent":["const css = (styles) => {\n  var styleSheet = document.createElement(\"style\");\n  styleSheet.type = \"text/css\";\n  styleSheet.innerText = styles;\n  document.head.appendChild(styleSheet);\n};\n\ncss`\n  .heart-donation {\n    max-width: 500px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .heart-donation .metric {\n    width: 100%;\n    height: 12px;\n    position: relative;\n    pointer-events: none;\n  }\n\n  .heart-donation .target {\n    position: absolute;\n    right: 0;\n    top: -200px;\n    text-align: right;\n    font-weight: bolder;\n    font-family: sans-serif;\n    color: #0000ff;\n\n    -webkit-animation: slide-in-right 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)\n      both;\n    animation: slide-in-right 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;\n  }\n  .heart-donation .value {\n    font-size: 32px;\n  }\n  .heart-donation .target .value {\n    color: #000077;\n  }\n\n  .heart-donation .current {\n    position: absolute;\n    left: 0;\n    top: -48px;\n    text-align: left;\n    font-weight: bolder;\n    font-family: sans-serif;\n    color: #0770077;\n\n    -webkit-animation: slide-in-left 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)\n      both;\n    animation: slide-in-left 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;\n  }\n\n  .heart-donation .current .value {\n    color: #00aa0055;\n  }\n\n  .heart-donation button {\n    cursor: pointer;\n    padding: 13px;\n    font-weight: 800;\n    border: none;\n    /* box-shadow: 0px 0px 50px 1px #00000033 !important; */\n    -webkit-animation: shadow-drop-2-center 0.4s\n      cubic-bezier(0.25, 0.46, 0.45, 0.94) both;\n    animation: shadow-drop-2-center 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)\n      both;\n    transition: all 1s;\n  }\n\n  .heart-donation button:hover {\n    color: red;\n    box-shadow: 0px 0px 5px 1px #00000033 !important;\n    animation: none;\n  }\n  /* ----------------------------------------------\n * Generated by Animista on 2021-12-9 15:53:21\n * Licensed under FreeBSD License.\n * See http://animista.net/license for more info. \n * w: http://animista.net, t: @cssanimista\n * ---------------------------------------------- */\n\n  /**\n * ----------------------------------------\n * animation shadow-drop-2-center\n * ----------------------------------------\n */\n  @-webkit-keyframes shadow-drop-2-center {\n    0% {\n      -webkit-transform: translateZ(0);\n      transform: translateZ(0);\n      -webkit-box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);\n      box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);\n    }\n    100% {\n      -webkit-transform: translateZ(50px);\n      transform: translateZ(50px);\n      -webkit-box-shadow: 0 0 20px 0px rgba(0, 0, 0, 0.25);\n      box-shadow: 0 0 20px 0px rgba(0, 0, 0, 0.25);\n    }\n  }\n  @keyframes shadow-drop-2-center {\n    0% {\n      -webkit-transform: translateZ(0);\n      transform: translateZ(0);\n      -webkit-box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);\n      box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);\n    }\n    100% {\n      -webkit-transform: translateZ(50px);\n      transform: translateZ(50px);\n      -webkit-box-shadow: 0 0 20px 0px rgba(0, 0, 0, 0.25);\n      box-shadow: 0 0 20px 0px rgba(0, 0, 0, 0.25);\n    }\n  }\n\n  /* ----------------------------------------------\n * Generated by Animista on 2021-12-9 16:3:53\n * Licensed under FreeBSD License.\n * See http://animista.net/license for more info. \n * w: http://animista.net, t: @cssanimista\n * ---------------------------------------------- */\n\n  /**\n * ----------------------------------------\n * animation slide-in-right\n * ----------------------------------------\n */\n  @-webkit-keyframes slide-in-right {\n    0% {\n      -webkit-transform: translateX(1000px);\n      transform: translateX(1000px);\n      opacity: 0;\n    }\n    100% {\n      -webkit-transform: translateX(0);\n      transform: translateX(0);\n      opacity: 1;\n    }\n  }\n  @keyframes slide-in-right {\n    0% {\n      -webkit-transform: translateX(1000px);\n      transform: translateX(1000px);\n      opacity: 0;\n    }\n    100% {\n      -webkit-transform: translateX(0);\n      transform: translateX(0);\n      opacity: 1;\n    }\n  }\n\n  /* ----------------------------------------------\n * Generated by Animista on 2021-12-9 16:5:42\n * Licensed under FreeBSD License.\n * See http://animista.net/license for more info. \n * w: http://animista.net, t: @cssanimista\n * ---------------------------------------------- */\n\n  /**\n * ----------------------------------------\n * animation slide-in-left\n * ----------------------------------------\n */\n  @-webkit-keyframes slide-in-left {\n    0% {\n      -webkit-transform: translateX(-1000px);\n      transform: translateX(-1000px);\n      opacity: 0;\n    }\n    100% {\n      -webkit-transform: translateX(0);\n      transform: translateX(0);\n      opacity: 1;\n    }\n  }\n  @keyframes slide-in-left {\n    0% {\n      -webkit-transform: translateX(-1000px);\n      transform: translateX(-1000px);\n      opacity: 0;\n    }\n    100% {\n      -webkit-transform: translateX(0);\n      transform: translateX(0);\n      opacity: 1;\n    }\n  }\n`;\n","const heartPath = (child) => `<path fill=\"#FF0000\" stroke=\"none\" d=\"\nM 299.05 89.4\nQ 304.15 60.75 281.7 31.55 218 -31.55 150 31.55 81.95 -31.55 18.3 31.55 -4.15 60.75 0.95 89.4 5.25 113.1 31.05 144.55 40.45 156 57.4 174.2 77.2 195.25 87.7 206.75 126.8 249.5 150 285.6\nL 150 285.65 150.05 285.6\nQ 173.2 249.5 212.3 206.75 222.75 195.25 242.6 174.2 259.5 156 268.95 144.55 294.75 113.1 299.05 89.4 Z\">\n${child}\n</path>`;\n\nconst animAlpha = (from, to, dur) => `\n<animate attributeName=\"fill-opacity\"\ndur=\"${dur}s\"\nvalues=\"${to - 0.3};${from - 0.3};\"\nrepeatCount=\"indefinite\"\n/>\n`;\nconst animScale = (from, to, dur) => `\n\n<animateTransform attributeName=\"transform\"\nattributeType=\"XML\"\ntype=\"scale\"\nfrom=\"${from} ${from}\"\nto=\"${to} ${to}\"\ndur=\"${dur}s\"\nrepeatCount=\"indefinite\"/>\n`;\n\nconst animMove = (from, to, dur) => {\n  const f = (x) => 150 - 150 * x;\n  return `\n<animateTransform attributeName=\"transform\"\nattributeType=\"XML\"\ntype=\"translate\"\nfrom=\"${f(from)} ${f(from)}\"\nto=\"${f(to)} ${f(to)}\"\ndur=\"${dur}s\"\nrepeatCount=\"indefinite\"/>`;\n};\n\nconst aHeart = (...arg) => `\n<g>\n  ${animMove(...arg)}\n  <g>\n    ${animScale(...arg)}\n    ${heartPath(animAlpha(...arg))}\n  </g>\n</g>`;\nconst Ah = (t) => aHeart(1, 0.3, t) + aHeart(0.3, 1, t);\nexport const svgHeart = `<svg width=\"200\" height=\"200\" viewBox=\"0 0 300 300\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"#fff\">\n${Ah(3)}\n${Ah(5)}\n${Ah(8)}\n${Ah(13)}\n</svg>`;\n","import { svgHeart } from \"./svg.heart\";\n\nconst getUrl = ({ name, end_date, start_date }) =>\n  `https://gps.raevskyteam.org/donation?name=${name}&end_date=${end_date}&start_date=${start_date}`;\n\nconst moneyFormater = new Intl.NumberFormat(\"ru-RU\", {\n  style: \"currency\",\n  currency: \"RUB\"\n});\nexport function makeWidget(tag) {\n  const props = {\n    name: tag.getAttribute(\"data-name\"),\n    start_date: tag.getAttribute(\"data-start\"),\n    end_date: tag.getAttribute(\"data-end\")\n  };\n  const dataUrl = tag.getAttribute(\"data-url\");\n  const targetValue = tag.getAttribute(\"data-target\");\n\n  tag.innerHTML = `\n  <div class=\"heart-donation\">\n    ${svgHeart}\n    <div class=\"metric\">\n      <div class=\"target\" id=\"donate-target\" >Необходимо <div class=\"value\">${moneyFormater.format(\n        targetValue\n      )}</div></div>\n      <div class=\"current\" id=\"donate-target\" ><div class=\"value\">3497</div> Собрано </div>\n    </div>\n    <button id=\"heart-donate-button\">Пожертвовать любую сумму</button>\n  </div>\n  `;\n\n  const el = tag.children[0];\n  const targetDiv = el.children[1].children[0];\n  const currentDiv = el.children[1].children[1];\n  const currentValueDiv = currentDiv.children[0];\n  const si = setInterval(() => {\n    currentValueDiv.innerHTML = Math.round(1000000 * Math.random());\n  }, 60);\n  currentValueDiv.style.opacity = \"0.2\";\n\n  const setTargetAlpha = () => {\n    targetDiv.style.color = \"#0000FF33\";\n    targetDiv.children[0].style.opacity = \"0.1\";\n  };\n  setTargetAlpha();\n  fetch(getUrl(props))\n    .then(async (r) => {\n      const resp = await r.json();\n      console.log(resp);\n      clearInterval(si);\n      currentValueDiv.innerHTML = moneyFormater.format(resp.data);\n      currentValueDiv.style.opacity = \"0.7\";\n    })\n    .catch((e) => {\n      clearInterval(si);\n      console.log(\"error\", e);\n    });\n\n  const donateButton = el.children[2];\n  donateButton.addEventListener(\"mouseover\", (e) => {\n    targetDiv.style.color = \"#0000FF55\";\n    targetDiv.children[0].style.opacity = \"0.7\";\n    console.log(targetDiv);\n  });\n\n  donateButton.addEventListener(\"mouseout\", setTargetAlpha);\n}\n","import \"./css\";\nimport { makeWidget } from \"./widget\";\n\ndocument.addEventListener(\"DOMContentLoaded\", function (event) {\n  console.log(\"document ready\");\n});\n\nwindow.document.addEventListener(\"DOMContentLoaded\", () => {\n  console.log(\"document ready\");\n});\nif (document.readyState !== \"loading\") {\n  console.log(\"document is already ready, just execute code here\");\n  myInitCode();\n} else {\n  document.addEventListener(\"DOMContentLoaded\", function () {\n    console.log(\"document was not ready, place code here\");\n    myInitCode();\n  });\n}\n\nfunction myInitCode() {\n  const widgets = document.getElementsByClassName(\"heart-donor\");\n  console.log(\"xxx\", widgets.length);\n  for (let element of widgets) {\n    makeWidget(element);\n  }\n}\n"]}